<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Typing Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #falling-section {
      position: relative;
      height: 300px;
      background: #e0f7fa;
      overflow: hidden;
      border: 2px dashed #00acc1;
      margin-bottom: 1rem;
    }
    .cloud-word {
      position: absolute;
      font-size: 1.2rem;
      animation: fall 5s linear forwards;
      white-space: nowrap;
    }
    @keyframes fall {
      to { top: 100%; }
    }
  </style>
</head>
<body class="p-4 bg-light">

  <div class="container">
    <h2 class="mb-4 text-center">ðŸŽ¯ Typing Game Challenge</h2>

    <!-- Section 1: Typing Practice -->
    <div class="card mb-5">
      <div class="card-header bg-primary text-white">
        Section 1: Typing Practice
      </div>
      <div class="card-body">
        <p id="word-display" class="fs-4 fw-bold text-center"></p>
        <input type="text" id="typing-input" class="form-control mb-2" placeholder="Type the word here">
        <div class="d-flex justify-content-between">
          <button class="btn btn-primary" onclick="startTyping()">Start</button>
          <button class="btn btn-success" onclick="downloadCertificate()">Download Certificate</button>
        </div>
        <p id="wpm-display" class="mt-3 text-success fw-semibold"></p>
      </div>
    </div>

    <!-- Section 2: Falling Words -->
    <div class="card">
      <div class="card-header bg-info text-white">
        Section 2: Falling Words
      </div>
      <div class="card-body">
        <div id="falling-section" class="rounded"></div>
        <input type="text" id="falling-input" class="form-control mb-2" placeholder="Type falling words here">
        <div class="d-flex justify-content-between">
          <button class="btn btn-info" onclick="startFalling()">Start</button>
          <button class="btn btn-danger" onclick="stopFalling()">Stop</button>
        </div>
        <p id="score-display" class="mt-3 text-primary fw-semibold"></p>
      </div>
    </div>
  </div>

  <script>
    const words = ["apple", "banana", "cloud", "river", "mountain", "sky", "forest", "ocean", "desert", "storm", "light", "code", "keyboard", "speed", "focus", "energy", "power", "dream", "goal", "vision"];
    let currentWord = "";
    let startTime;
    let typedWords = 0;

    function startTyping() {
      currentWord = words[Math.floor(Math.random() * words.length)];
      document.getElementById("word-display").textContent = currentWord;
      document.getElementById("typing-input").value = "";
      startTime = new Date();
      typedWords = 0;
      document.getElementById("wpm-display").textContent = "";
    }

    document.getElementById("typing-input").addEventListener("input", function () {
      if (this.value.trim() === currentWord) {
        typedWords++;
        const elapsed = (new Date() - startTime) / 60000;
        const wpm = Math.round(typedWords / elapsed);
        document.getElementById("wpm-display").textContent = `WPM: ${wpm}`;
        startTyping();
      }
    });

    function downloadCertificate() {
      const wpmText = document.getElementById("wpm-display").textContent || "WPM: 0";
      const certificate = `ðŸŽ“ Certificate of Typing Speed\n\n${wpmText}\n\nCongratulations on completing the typing challenge!`;
      const blob = new Blob([certificate], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "typing_certificate.txt";
      link.click();
    }

    // Section 2: Falling Words
    let fallingInterval;
    let score = 0;

    function startFalling() {
      score = 0;
      document.getElementById("score-display").textContent = "Score: 0";
      document.getElementById("falling-section").innerHTML = "";
      fallingInterval = setInterval(() => {
        const word = words[Math.floor(Math.random() * words.length)];
        const span = document.createElement("span");
        span.textContent = word;
        span.className = "cloud-word";
        span.style.left = Math.random() * 90 + "%";
        span.style.top = "0px";
        document.getElementById("falling-section").appendChild(span);
        setTimeout(() => span.remove(), 5000);
      }, 1000);
    }

    function stopFalling() {
      clearInterval(fallingInterval);
    }

    document.getElementById("falling-input").addEventListener("input", function () {
      const typed = this.value.trim();
      const clouds = document.querySelectorAll(".cloud-word");
      clouds.forEach(cloud => {
        if (cloud.textContent === typed) {
          score++;
          document.getElementById("score-display").textContent = `Score: ${score}`;
          cloud.remove();
          this.value = "";
        }
      });
    });
  </script>
</body>
</html>